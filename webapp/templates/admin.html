{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VirtuaTrip - Agencia de Viajes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/mi-cuenta.css' %}" />
<body>
  <header>
    <div class="logo-titulo">
      <img src="{% static 'img/logo.png' %}" alt="Logo Raconto">
      <div>
        <h1>Raconto</h1>
        <h2>Sabores que perduran en el tiempo</h2>
      </div>
    </div>
     <nav class="nav-principal">
        <a href="{% url 'inicio' %}">Inicio</a>
        <a href="{% url 'mis-reservas' %}" class="nav-link">Reservas</a>
        <a href="{% url 'quienes-somos' %}" class="nav-link active">Quiénes Somos</a>
      </nav>
  </header>

        

        <!--{% if usuario_nombre %}
          <span>Hola {{ usuario_nombre }}</span>
           <a href="{% url 'cerrar_sesion' %}">Cerrar Sesión</a> 
        {% else %}
           <a href="{% url 'login' %}">Iniciar Sesión</a> 
        {% endif %}--> 
        {% if usuario_nombre %}
            <div id="perfil_usuario" class="dropdown ms-auto">
            <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="usuarioDropdown" 
                data-bs-toggle="dropdown" aria-expanded="false">
                Hola {{ usuario_nombre }}
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="usuarioDropdown">
                <li><a class="dropdown-item" href="{% url 'mi_perfil' %}">Modificar Perfil</a></li>

                {% if request.session.usuario_rol == 1 %}
                    <li><a class="dropdown-item" href="{% url 'listar_usuarios' %}">Administrar Usuarios</a></li>
                {% endif %}

                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="{% url 'cerrar_sesion' %}">Cerrar Sesión</a></li>
            </ul>
            </div>
        {% else %}
            <a href="{% url 'registro' %}">Registrarse</a>
            <a id="perfil_usuario"  class="nav-link" href="{% url 'login' %}">Iniciar Sesión</a>
        {% endif %}

    </nav>
    </header>
    
    <!--  Contenedor del Formulario de Inicio de Sesión -->
   <!-- Tabla de Usuarios -->
  <div class="container mt-5">
    <h1 class="text-center mb-4">Administrar Usuarios</h1>

    <div class="d-flex justify-content-end mb-3">
        <a href="{% url 'registro' %}" class="btn btn-success">
            + Nuevo Usuario
        </a>
    </div>

    <div class="table-responsive">
      <table class="table table-bordered table-hover text-center align-middle">
        <thead class="table-dark">
          <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Correo</th>
            <th>Rol</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          {% for usuario in usuarios %}
          <tr>
            <td>{{ usuario.id }}</td>
            <td>{{ usuario.nombre }} {{ usuario.apellidos }}</td>
            <td>{{ usuario.correo }}</td>
            <td>
              {% if usuario.rol == 1 %}Administrador
              {% elif usuario.rol == 2 %}Editor
              {% elif usuario.rol == 3 %}Vendedor
              {% else %}Invitado{% endif %}
            </td>
            <td>
              <a href="" class="btn btn-sm btn-primary">Editar</a>
              <a href="" class="btn btn-sm btn-danger" onclick="return confirm('¿Estás seguro de eliminar este usuario?')">Eliminar</a>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="5">No hay usuarios registrados.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
      
    
	 
 <footer>
    <div class="info-contacto">
      <p>Santa Rosa #339, Los Andes</p>
      <p>Combate de las Coimas #206, San Felipe</p>
      <p>Horarios: 09:30 a 21:30</p>
      <p>Teléfonos: +56 9 1234 5678 / +56 2 2345 6789</p>
    </div>
    <div class="logo-footer">
      <img src="{% static 'img/logo.png' %}" alt="Logo Raconto">
    </div>
  </footer>

    

    <!--  Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'js/iniciar_sesion.js' %}?v=1004202503336"></script>
</body> 
</html>
